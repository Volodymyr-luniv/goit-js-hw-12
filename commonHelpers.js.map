{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '29243392-4dbc80ece43085fc7952f4964';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages({ page = 1, per_page = 15, q = '' } = {}) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        page,\n        per_page,\n        q,\n        key: API_KEY,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderImages(images) {\n  const imageList = document.querySelector('.image-list');\n\n  const imagesMarkup = images\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\" data-lightbox=\"gallery\">\n              <div class=\"image-wrapper\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n              </div>\n              <div class=\"image-info\">\n                <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n                <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n                <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n                <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n              </div>\n            </a>\n          </li>`\n    )\n    .join('');\n\n  imageList.insertAdjacentHTML('beforeend', imagesMarkup);\n  const lightbox = new SimpleLightbox('.gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 0,\n  });\n\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport * as allFetch from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.form-input');\nconst loader = document.querySelector('.loader');\nconst imageList = document.querySelector('.image-list');\nconst btnMore = document.querySelector('.btn-more');\n\nconst params = {\n  page: 1,\n  per_page: 15,\n  q: '',\n};\n\nlet totalHits = 0;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  params.q = input.value.trim();\n\n  if (params.q === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term.',\n    });\n    form.reset();\n    return;\n  }\n\n  params.page = 1;\n  btnMore.classList.add('hidden');\n  loader.style.display = 'block';\n  imageList.innerHTML = '';\n\n  try {\n    const { hits, totalHits: newTotalHits } = await allFetch.fetchImages(\n      params\n    );\n    totalHits = newTotalHits;\n\n    if (hits.length === 0) {\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      renderImages(hits);\n      if (totalHits > params.page * params.per_page) {\n        btnMore.classList.remove('hidden');\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}`,\n    });\n  } finally {\n    loader.style.display = 'none';\n    btnMore.classList.remove('disabled');\n  }\n});\n\nbtnMore.addEventListener('click', async () => {\n  params.page += 1;\n\n  btnMore.classList.add('disabled');\n  loader.style.display = 'block';\n\n  try {\n    const { hits } = await allFetch.fetchImages(params);\n    renderImages(hits);\n\n    const galleryItem = document.querySelector('.gallery-item');\n    const { height } = galleryItem.getBoundingClientRect();\n\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n\n    if (params.page * params.per_page >= totalHits) {\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      btnMore.classList.add('hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}`,\n    });\n  } finally {\n    loader.style.display = 'none';\n    btnMore.classList.remove('disabled');\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","page","per_page","q","axios","error","renderImages","images","imageList","imagesMarkup","image","SimpleLightbox","form","input","loader","btnMore","params","totalHits","event","iziToast","hits","newTotalHits","allFetch.fetchImages","galleryItem","height"],"mappings":"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"}